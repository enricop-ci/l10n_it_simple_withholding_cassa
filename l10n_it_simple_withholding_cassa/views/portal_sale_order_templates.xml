<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="portal_sale_order_content_inherit" inherit_id="sale.portal_order_page">
        <!-- Aggiungiamo la nostra tabella personalizzata dopo quella esistente -->
        <xpath expr="//div[@class='card-body']" position="after">
            <div class="card-footer">
                <div class="row justify-content-end">
                    <div class="col-lg-4">
                        <h5>Riepilogo Totali</h5>
                        <table class="table table-sm">
                            <tr>
                                <td>Imponibile:</td>
                                <td class="text-end">
                                    <span t-field="order.amount_untaxed" t-options='{"widget": "monetary", "display_currency": order.currency_id}'/>
                                </td>
                            </tr>
                            <tr t-if="order.apply_cassa and order.cassa_amount > 0">
                                <td t-out="'Cassa Previdenziale ' + str(order.cassa_percent) + '%:'"/>
                                <td class="text-end">
                                    <span t-field="order.cassa_amount" t-options='{"widget": "monetary", "display_currency": order.currency_id}'/>
                                </td>
                            </tr>
                            <tr>
                                <td><span t-field="order.vat_label"/>:</td>
                                <td class="text-end">
                                    <span t-field="order.amount_tax" t-options='{"widget": "monetary", "display_currency": order.currency_id}'/>
                                </td>
                            </tr>
                            <tr>
                                <td><strong>Totale Documento:</strong></td>
                                <td class="text-end">
                                    <strong><span t-field="order.total_gross" t-options='{"widget": "monetary", "display_currency": order.currency_id}'/></strong>
                                </td>
                            </tr>
                            <tr t-if="order.apply_withholding and order.withholding_amount > 0">
                                <td t-out="'Ritenuta d\'acconto ' + str(order.withholding_percent) + '%:'"/>
                                <td class="text-end text-danger">
                                    -<span t-field="order.withholding_amount" t-options='{"widget": "monetary", "display_currency": order.currency_id}'/>
                                </td>
                            </tr>
                            <tr class="border-top">
                                <td><strong>Netto a Pagare:</strong></td>
                                <td class="text-end">
                                    <strong><span t-field="order.net_amount" t-options='{"widget": "monetary", "display_currency": order.currency_id}'/></strong>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </xpath>
    </template>
</odoo>